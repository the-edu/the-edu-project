'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';

import { ROUTE } from '@/constants/route';
import { cn } from '@/lib/utils';

const SHOW_BADGE = true;

export const Sidebar = () => {
  return (
    <aside className="bg-background flex w-[260px] flex-col border-r border-[#D9D9D9]">
      <nav className="relative flex flex-1 flex-col">
        <SidebarItem href={ROUTE.DASHBOARD.LOGS.LIST}>
          <BookTextIcon />
          <SidebarItemText>수업 로그</SidebarItemText>
        </SidebarItem>
        <SidebarItem href={ROUTE.DASHBOARD.CONNECTIONS.LIST}>
          <LinkIcon />
          <SidebarItemText>
            연결 관리
            {SHOW_BADGE && <SidebarBadge />}
          </SidebarItemText>
        </SidebarItem>
        <div className="absolute bottom-0 flex w-full flex-col">
          <SidebarItem href={ROUTE.DASHBOARD.SETTINGS}>
            <SettingsIcon />
            <SidebarItemText>설정</SidebarItemText>
          </SidebarItem>
        </div>
      </nav>
    </aside>
  );
};

type SidebarItemProps = {
  href: string;
  children: React.ReactNode;
};

const SidebarItem = ({ href, children }: SidebarItemProps) => {
  const pathname = usePathname();

  const isActive = pathname.startsWith(href);

  return (
    <Link
      href={href}
      className={cn(
        'flex h-[58px] items-center gap-2 px-4',
        isActive && 'font-bold [&>svg]:stroke-2'
      )}
    >
      {children}
    </Link>
  );
};

const SidebarItemText = ({ children }: { children: React.ReactNode }) => {
  return <span className="relative">{children}</span>;
};

const SidebarBadge = () => {
  return (
    <span className="bg-dedu-orange absolute top-0 -right-[13px] size-[5px] rounded-full" />
  );
};

const BookTextIcon = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
    >
      <path d="M5 19V4.5C5 3.39543 5.89543 2.5 7 2.5H17C18.1046 2.5 19 3.39543 19 4.5V17.4118" />
      <path d="M19 20C19 20.5523 18.5523 21 18 21H7C5.89543 21 5 20.1046 5 19V19C5 17.8954 5.89543 17 7 17H19V20Z" />
      <path
        d="M10 6.5L14 6.5"
        strokeLinecap="round"
      />
      <path
        d="M10 10L14 10"
        strokeLinecap="round"
      />
    </svg>
  );
};

const LinkIcon = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
    >
      <path
        d="M13.6673 10.8388V10.8388C12.3004 9.47199 10.0843 9.47199 8.71751 10.8388L4.47487 15.0815C3.10804 16.4483 3.10804 18.6644 4.47487 20.0312V20.0312C5.84171 21.398 8.05779 21.398 9.42462 20.0312L11.5459 17.9099"
        strokeLinecap="round"
      />
      <path
        d="M10.8386 13.6673V13.6673C12.2054 15.0341 14.4215 15.0341 15.7883 13.6673L20.031 9.42464C21.3978 8.05781 21.3978 5.84173 20.031 4.47489V4.47489C18.6642 3.10806 16.4481 3.10806 15.0812 4.47489L12.9599 6.59621"
        strokeLinecap="round"
      />
    </svg>
  );
};

const SettingsIcon = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M7.77881 12.2002C7.77881 10.0187 9.54728 8.2502 11.7288 8.2502C13.9103 8.2502 15.6788 10.0187 15.6788 12.2002C15.6788 14.3817 13.9103 16.1502 11.7288 16.1502C9.54728 16.1502 7.77881 14.3817 7.77881 12.2002ZM11.7288 10.1502C10.5966 10.1502 9.6788 11.068 9.6788 12.2002C9.6788 13.3324 10.5966 14.2502 11.7288 14.2502C12.861 14.2502 13.7788 13.3324 13.7788 12.2002C13.7788 11.068 12.861 10.1502 11.7288 10.1502Z"
        fill="currentColor"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M9.86003 2.17098C10.4666 2.05861 11.0913 2 11.7288 2C12.3663 2 12.991 2.05861 13.5976 2.17098C14.639 2.36393 15.0792 3.31339 15.2216 3.90465C15.318 4.30492 15.5705 4.66331 15.9536 4.88453C16.3365 5.10555 16.7727 5.14514 17.1672 5.02885C17.7505 4.85694 18.7904 4.76465 19.4781 5.56735C20.288 6.51281 20.9284 7.60898 21.3512 8.80874C21.7026 9.80595 21.1015 10.6601 20.6612 11.0785C20.3628 11.3621 20.1786 11.7599 20.1786 12.2024C20.1786 12.6446 20.3626 13.0422 20.6607 13.3258C21.1008 13.7444 21.7015 14.5988 21.3496 15.5958C20.9254 16.7975 20.283 17.8952 19.4705 18.8414C18.784 19.641 17.7475 19.5503 17.1652 19.3797C16.7712 19.2642 16.336 19.3041 15.9539 19.5247C15.5719 19.7452 15.3198 20.1021 15.2228 20.5009C15.0793 21.0907 14.6385 22.0359 13.6002 22.2285C12.9929 22.3412 12.3673 22.4 11.7288 22.4C11.0905 22.4 10.4651 22.3413 9.85791 22.2286C8.8192 22.0359 8.37851 21.0902 8.23512 20.5003C8.13816 20.1013 7.88601 19.7443 7.50388 19.5237C7.12169 19.303 6.68634 19.2632 6.2923 19.3788C5.70985 19.5496 4.67296 19.6405 3.9863 18.8405C3.17473 17.8951 2.53285 16.7985 2.10882 15.598C1.75669 14.6011 2.35709 13.7466 2.79705 13.3279C3.095 13.0444 3.27878 12.6469 3.27878 12.2048C3.27878 11.7623 3.09455 11.3643 2.79596 11.0807C2.3556 10.6624 1.75438 9.80851 2.10554 8.81128C2.52813 7.61117 3.16838 6.51465 3.97824 5.56888C4.66599 4.76571 5.70645 4.85819 6.28983 5.03025C6.68446 5.14665 7.12077 5.10709 7.50368 4.88601C7.88702 4.66469 8.13957 4.30607 8.23585 3.90557C8.37804 3.31408 8.81818 2.36401 9.86003 2.17098ZM10.2277 4.03523C10.2233 4.03969 10.2172 4.04649 10.2094 4.05647C10.1676 4.11021 10.1166 4.21059 10.0832 4.34967C9.87023 5.23562 9.30663 6.03901 8.45368 6.53146C7.60168 7.02337 6.62534 7.11013 5.75234 6.85264C5.61536 6.81224 5.50308 6.80623 5.43558 6.81565C5.42272 6.81744 5.41361 6.81937 5.40752 6.82096C4.75887 7.58242 4.24585 8.46179 3.90496 9.42172C3.90664 9.4277 3.90947 9.43633 3.91421 9.44799C3.93975 9.51086 4.00101 9.60484 4.10446 9.7031C4.76499 10.3305 5.17877 11.2201 5.17877 12.2048C5.17877 13.1883 4.766 14.077 4.10687 14.7043C4.00352 14.8026 3.94235 14.8967 3.91687 14.9596C3.91215 14.9712 3.90932 14.9799 3.90765 14.9858C4.24971 15.9461 4.76405 16.8255 5.41411 17.5868C5.42017 17.5883 5.42923 17.5903 5.44203 17.5921C5.50919 17.6015 5.62097 17.5956 5.75757 17.5556C6.62929 17.2999 7.60352 17.3873 8.45388 17.8782C9.30411 18.3691 9.86685 19.169 10.0814 20.0516C10.115 20.1901 10.166 20.2899 10.2077 20.3433C10.2155 20.3533 10.2215 20.36 10.2259 20.3644C10.7126 20.4534 11.2149 20.5 11.7288 20.5C12.2429 20.5 12.7452 20.4534 13.2321 20.3644C13.2365 20.3599 13.2425 20.3532 13.2503 20.3433C13.292 20.2899 13.343 20.1902 13.3767 20.0517C13.5913 19.1694 14.154 18.3699 15.0039 17.8792C15.8541 17.3884 16.828 17.3009 17.6996 17.5564C17.8361 17.5964 17.9478 17.6022 18.015 17.5928C18.0278 17.591 18.0368 17.5891 18.0429 17.5875C18.6936 16.8256 19.2084 15.9453 19.5506 14.9841C19.5489 14.9781 19.5461 14.9694 19.5414 14.9578C19.5159 14.8949 19.4547 14.8008 19.3513 14.7025C18.6917 14.0752 18.2786 13.1862 18.2786 12.2024C18.2786 11.2179 18.6922 10.3285 19.3525 9.70111C19.4559 9.60282 19.5171 9.50882 19.5427 9.44594C19.5474 9.43427 19.5502 9.42564 19.5519 9.41965C19.2108 8.46 18.6977 7.58091 18.049 6.81971C18.0429 6.81812 18.0338 6.81619 18.021 6.81439C17.9535 6.80498 17.8413 6.81097 17.7044 6.85133C16.8315 7.1086 15.8555 7.02177 15.0036 6.52997C14.1511 6.03776 13.5876 5.2349 13.3744 4.34945C13.3409 4.21044 13.29 4.11014 13.2482 4.05645C13.2404 4.04648 13.2343 4.03968 13.2299 4.03523C12.7437 3.94648 12.2421 3.9 11.7288 3.9C11.2155 3.9 10.7139 3.94648 10.2277 4.03523ZM19.5542 9.4089L19.5539 9.41104L19.5542 9.4089ZM19.5529 14.9948L19.5526 14.9927L19.5529 14.9948ZM3.90539 14.9966L3.90563 14.9945L3.90539 14.9966ZM3.90269 9.41096L3.90293 9.41311L3.90269 9.41096Z"
        fill="currentColor"
      />
    </svg>
  );
};
